@model List<Domain.Models.Dress>

@{
    Layout = null;
}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>StyleBay</title>
    <link rel="stylesheet" href="~/css/Style.css" />
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
</head>

<body>

    <header>
        <div class="header-left">StyleBay</div>

        <div class="header-right">
            <a href="/Cart/Index">
                <i class="fa-solid fa-cart-shopping"></i>
            </a>

            <a href="/User/Profile">
                <i class="fa-solid fa-user"></i>
            </a>
        </div>
    </header>



    <div class="container">


        <!-- 🔍 SEARCH (UNCHANGED) -->
        <form method="get" class="search-bar">
            <input type="text" name="search"
                   placeholder="Search dresses..."
                   value="@Context.Request.Query["search"]" />
            <button type="submit">Search</button>
        </form>

        <!-- 🎯 FILTERS (NEW – NO DESIGN BREAK) -->
        <form method="get" class="filter-bar">

            <select name="categoryId">
                <option value="">All Categories</option>
                @foreach (var cat in ViewBag.DressCategories)
                {
                    <option value="@cat.Id"
                            selected="@(Context.Request.Query["categoryId"] == cat.Id.ToString())">
                        @cat.Name
                    </option>
                }
            </select>

            <select name="priceCategoryId">
                <option value="">All Prices</option>
                @foreach (var pc in ViewBag.PriceCategories)
                {
                    <option value="@pc.Id"
                            selected="@(Context.Request.Query["priceCategoryId"] == pc.Id.ToString())">
                        @pc.Name
                    </option>
                }
            </select>

            <input type="hidden" name="search"
                   value="@Context.Request.Query["search"]" />

            <button type="submit">Filter</button>
        </form>

        <!-- 🛍 PRODUCTS -->
        <div class="cards">
            @foreach (var dress in Model)
            {
                <div class="card">
                    <img src="@Url.Content(dress.ImageName.Replace("/images/", "/Images/"))"
                         alt="@dress.Name" />

                    <div class="card-body">
                        <h4>@dress.Name</h4>
                        <p class="price">₹@dress.Price</p>
                        <p>@dress.Description</p>

                        <div class="card-buttons">
                            <form asp-controller="Cart" asp-action="Add" method="post">
                                <input type="hidden" name="id" value="@dress.Id" />
                                <button class="btn add-cart">Add to Cart</button>
                            </form>

                            <form method="post" action="/Order/Review">
                                <input type="hidden" name="dressId" value="@dress.Id" />
                                <button class="btn buy-now">Buy Now</button>
                            </form>
                        </div>
                    </div>
                </div>
            }
        </div>

    </div>
</body>
</html>
